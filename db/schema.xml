<?xml version="1.0" encoding="UTF-8"?>
<database name="default" defaultIdMethod="native" namespace="Maxters\Models">

  <table name="users" phpName="User">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="name" type="varchar" size="255" required="true" />
    <column name="email" type="varchar" size="255" required="true" />

  <behavior name="validate">
     <parameter name="rule1" value="{column: email, validator: Unique}" />
  </behavior>

  </table>

  <table name="roles" phpName="Roles">
      <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
      <column name="name" type="varchar" size="255" required="true" />
  </table>

  <table name="users_roles" isCrossRef="true">
        <column name="user_id" type="integer" required="true" primaryKey="true" />
        <column name="role_id" type="integer" required="true" primaryKey="true" />
        <foreign-key foreignTable="users">
            <reference local="user_id" foreign="id" />
        </foreign-key>
        <foreign-key foreignTable="roles">
            <reference local="role_id" foreign="id" />
        </foreign-key>
  </table>

</database>
